<%- include("layout") %>

<h1>Orders</h1>

<table border="1" cellpadding="10" cellspacing="0" style="margin-top:20px;width:100%;">
  <tr>
    <th>Name</th>
    <th>Email</th>
    <th>Payment</th>
    <th>Items</th>
    <th>Total</th>
    <th>Date</th>
  </tr>

  <% orders.forEach(o => { %>
    <tr>
      <td><%= o.name %></td>
      <td><%= o.email %></td>
      <td><%= o.payment %></td>
      <td>
        <% if (o.items && o.items.length) { %>
          <ul>
            <% o.items.forEach(i => { %>
              <li><%= i.name %> â€” $<%= i.price %></li>
            <% }) %>
          </ul>
        <% } else { %>
          <span>Single package: <%= o.packageName %> ($<%= o.packagePrice %>)</span>
        <% } %>
      </td>
      <td>$<%= o.total || o.packagePrice || 0 %></td>
      <td><%= o.createdAt ? o.createdAt.toDateString() : "" %></td>
    </tr>
  <% }) %>
</table>

</main>
</body>
</html>
