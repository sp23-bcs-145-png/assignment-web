<style>
  body {
    background: #000;
    color: #fff;
    font-family: Arial, sans-serif;
  }

  .card {
    max-width: 800px;
    margin: 60px auto;
    padding: 30px;
    background: #111;
    border-radius: 12px;
  }

  .gold {
    color: #d4af37;
  }

  hr {
    border: 1px solid #333;
    margin: 20px 0;
  }

  input {
    padding: 10px;
    width: 100%;
    margin-bottom: 12px;
    border-radius: 6px;
    border: 1px solid #333;
    background: #000;
    color: #fff;
  }

  button {
    background: #d4af37;
    border: none;
    padding: 12px 20px;
    border-radius: 6px;
    cursor: pointer;
    font-weight: bold;
    margin-top: 6px;
  }

  .row {
    margin-bottom: 8px;
  }

  .apply-btn {
    margin-bottom: 20px;
  }
</style>

<div class="card">
  <h2 class="gold">Order Preview</h2>

  <% cart.forEach(item => { %>
    <div class="row">
      <%= item.name %> × <%= item.quantity %> — ₹<%= item.price %>
    </div>
  <% }) %>

  <hr>

  <p>Subtotal: ₹<%= subtotal %></p>
  <p>Discount: ₹<%= discount %></p>
  <h3 class="gold">Total: ₹<%= total %></h3>

  <hr>

  <!-- APPLY COUPON (GET request to recalculate preview) -->
  <form method="GET" action="/order/preview">
    <input
      type="text"
      name="coupon"
      placeholder="Enter coupon code (SAVE10)"
      value="<%= coupon || '' %>"
    />
    <button type="submit" class="apply-btn">Apply Coupon</button>
  </form>

  <hr>

  <!-- CONFIRM ORDER -->
  <form method="POST" action="/order/confirm">
    <!-- preserve coupon on confirm -->
    <input type="hidden" name="coupon" value="<%= coupon || '' %>" />

    <input
      type="email"
      name="email"
      placeholder="Email"
      required
    />

    <button type="submit">Confirm Order</button>
  </form>
</div>
